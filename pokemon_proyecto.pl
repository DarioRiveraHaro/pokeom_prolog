% Definición de los Pokémon con sus características: color, tipo, altura
pokemon(bulbasaur, [color(verde), tipo(planta), altura(pequenio)]).
pokemon(ivysaur, [color(verde), tipo(planta), altura(mediano)]).
pokemon(venusaur, [color(verde), tipo(planta_veneno), altura(grande)]).
pokemon(charmander, [color(rojo), tipo(fuego), altura(pequenio)]).
pokemon(charmeleon, [color(rojo), tipo(fuego), altura(mediano)]).
pokemon(charizard, [color(rojo), tipo(fuego_volador), altura(grande)]).
pokemon(squirtle, [color(azul), tipo(agua), altura(pequenio)]).
pokemon(wartortle, [color(morado), tipo(agua), altura(mediano)]).
pokemon(blastoise, [color(azul), tipo(agua), altura(grande)]).
pokemon(caterpie, [color(verde), tipo(bicho), altura(pequenio)]).
pokemon(metapod, [color(verde), tipo(bicho), altura(pequenio)]).
pokemon(butterfree, [color(morado), tipo(bicho:volador), altura(mediano)]).
pokemon(weedle, [color(cafe), tipo(bicho_veneno), altura(pequenio)]).
pokemon(kakuna, [color(amarillo), tipo(bicho_veneno), altura(pequenio)]).
pokemon(beedrill, [color(amarillo), tipo(bicho_veneno), altura(grande)]).
pokemon(pidgey, [color(cafe), tipo(normal_volador), altura(pequenio)]).
pokemon(pidgeotto, [color(cafe), tipo(normal_volador), altura(mediano)]).
pokemon(pidgeot, [color(blanco), tipo(normal_volador), altura(grande)]).
pokemon(rattata, [color(morado), tipo(normal), altura(pequenio)]).
pokemon(raticate, [color(cafe), tipo(normal), altura(mediano)]).
pokemon(spearow, [color(tutifruti), tipo(normal_volador), altura(pequenio)]).
pokemon(fearow, [color(cafe), tipo(normal_volador), altura(grande)]).
pokemon(ekans, [color(morado), tipo(veneno), altura(mediano)]).
pokemon(arbok, [color(morado), tipo(veneno), altura(grande)]).
pokemon(pikachu, [color(amarillo), tipo(electrico), altura(pequenio)]).
pokemon(raichu, [color(naranja), tipo(electrico), altura(pequenio)]).
pokemon(sandshrew, [color(cafe), tipo(tierra), altura(pequenio)]).
pokemon(sandslash, [color(cafe), tipo(tierra), altura(mediano)]).
pokemon(nidoranm, [color(azul), tipo(veneno), altura(pequenio)]).
pokemon(nidorina, [color(azul), tipo(veneno), altura(pequenio)]).
pokemon(nidoqueen, [color(azul), tipo(veneno_tierra), altura(grande)]).
pokemon(nidoranh, [color(morado), tipo(veneno), altura(pequenio)]).
pokemon(nidorino, [color(morado), tipo(veneno), altura(pequenio)]).
pokemon(nidoking, [color(morado), tipo(veneno_tierra), altura(grande)]).
pokemon(clefary, [color(rosa), tipo(hada), altura(pequenio)]).
pokemon(clefable, [color(rosa), tipo(hada), altura(mediano)]).
pokemon(vulpix, [color(rojo), tipo(fuego), altura(pequenio)]).
pokemon(ninetales, [color(amarillo), tipo(fuego), altura(grande)]).
pokemon(jigglypuff, [color(rosa), tipo(normal_hada), altura(pequenio)]).
pokemon(wigglytuff, [color(rosa), tipo(normal_hada), altura(mediano)]).
pokemon(zubat, [color(azul), tipo(bicho), tipo(veneno_volador), altura(mediano)]).
pokemon(golbat, [color(azul), tipo(bicho), tipo(veneno_volador), altura(grande)]).
pokemon(oddish, [color(azul), tipo(planta_veneno), altura(pequenio)]).
pokemon(gloom, [color(azul), tipo(planta_veneno), altura(pequenio)]).
pokemon(vileplume, [color(azul), tipo(planta_veneno), altura(mediano)]).
pokemon(paras, [color(naranja), tipo(bicho_planta), altura(pequenio)]).
pokemon(parasect, [color(rojo), tipo(bicho_planta), altura(grande)]).
pokemon(venonat, [color(morado), tipo(bicho_veneno), altura(pequenio)]).
pokemon(venomoth, [color(griss), tipo(bicho_veneno), altura(mediano)]).
pokemon(diglett, [color(cafe), tipo(tierra), altura(pequenio)]).
pokemon(dugtrio, [color(cafe), tipo(tierra), altura(pequenio)]).
pokemon(meowth, [color(beige), tipo(normal), altura(mediano)]).
pokemon(persian, [color(beige), tipo(normal), altura(mediano)]).
pokemon(psyduck, [color(amarillo), tipo(agua), altura(mediano)]).
pokemon(golduck, [color(azul), tipo(agua), altura(grande)]).
pokemon(mankey, [color(beige), tipo(lucha), altura(mediano)]).
pokemon(primeape, [color(beige), tipo(lucha), altura(grande)]).
pokemon(growlithe, [color(rojo), tipo(fuego), altura(mediano)]).
pokemon(arcanine, [color(rojo), tipo(fuego), altura(grande)]).
pokemon(poliwag, [color(azul), tipo(agua), altura(pequenio)]).
pokemon(poliwhirl, [color(azul), tipo(agua), altura(pequenio)]).
pokemon(poliwrath, [color(azul), tipo(agua_lucha), altura(mediano)]).
pokemon(abra, [color(beige), tipo(psiquico), altura(mediano)]).
pokemon(kadabra, [color(amarillo), tipo(psiquico), altura(grande)]).
pokemon(alakazam, [color(amarillo), tipo(psiquico), altura(grande)]).
pokemon(machop, [color(azul), tipo(lucha), altura(pequenio)]).
pokemon(machoke, [color(griss), tipo(lucha), altura(grande)]).
pokemon(machamp, [color(azul), tipo(lucha), altura(grande)]).
pokemon(bellsprout, [color(amarillo), tipo(planta_veneno), altura(pequenio)]).
pokemon(weepinbell, [color(amarillo), tipo(planta_veneno), altura(mediano)]).
pokemon(victreebel, [color(amarillo), tipo(planta_veneno), altura(grande)]).
pokemon(tentacool, [color(azul), tipo(agua_veneno), altura(mediano)]).
pokemon(tentacruel, [color(azul), tipo(agua_veneno), altura(grande)]).
pokemon(geodude, [color(griss), tipo(roca_tierra), altura(pequenio)]).
pokemon(golem, [color(marron), tipo(roca_tierra), altura(grande)]).
pokemon(graveler, [color(marron), tipo(roca_tierra), altura(mediano)]).
pokemon(ponyta, [color(naranja), tipo(fuego), altura(mediano)]).
pokemon(rapidash, [color(naranja), tipo(fuego), altura(grande)]).
pokemon(slowpoke, [color(rosa), tipo(agua_psiquico), altura(mediano)]).
pokemon(muk, [color(morado), tipo(veneno), altura(grande)]).
pokemon(grimer, [color(morado), tipo(veneno), altura(pequeno)]).
pokemon(dewgong, [color(blanco), tipo(agua_hielo), altura(grande)]).
pokemon(seel, [color(blanco), tipo(agua), altura(mediano)]).
pokemon(dodrio, [color(marron), tipo(normal_volador), altura(grande)]).
pokemon(doduo, [color(marron), tipo(normal_volador), altura(mediano)]).
pokemon(farfetchd, [color(marron), tipo(normal_volador), altura(pequeno)]).
pokemon(magneton, [color(gris), tipo(electrico_acero), altura(mediano)]).
pokemon(magnemite, [color(gris), tipo(electrico_acero), altura(pequeno)]).
pokemon(slowbro, [color(rosa), tipo(agua_psiquico), altura(grande)]).
pokemon(gengar, [color(morado), tipo(fantasma_veneno), altura(pequeno)]).
pokemon(haunter, [color(morado), tipo(fantasma_veneno), altura(mediano)]).
pokemon(gastly, [color(morado), tipo(fantasma_veneno), altura(pequeno)]).
pokemon(cloyster, [color(azul), tipo(agua_hielo), altura(mediano)]).
pokemon(shellder, [color(violeta), tipo(agua), altura(pequeno)]).
pokemon(kingler, [color(azul), tipo(agua), altura(grande)]).
pokemon(krabby, [color(rojo), tipo(agua), altura(pequeno)]).
pokemon(hypno, [color(amarillo), tipo(psiquico), altura(mediano)]).
pokemon(drowzee, [color(amarillo), tipo(psiquico), altura(pequeno)]).
pokemon(onix, [color(gris), tipo(roca_tierra), altura(grande)]).
pokemon(weezing, [color(morado), tipo(veneno), altura(mediano)]).
pokemon(koffing, [color(morado), tipo(veneno), altura(pequeno)]).
pokemon(voltorb, [color(rojo), tipo(electrico), altura(pequeno)]).
pokemon(electrode, [color(rojo), tipo(electrico), altura(mediano)]).
pokemon(exeggcute, [color(rosa), tipo(planta_psiquico), altura(pequeno)]).
pokemon(exeggutor, [color(marron), tipo(planta_psiquico), altura(grande)]).
pokemon(cubone, [color(marron), tipo(tierra), altura(pequeno)]).
pokemon(marowak, [color(marron), tipo(tierra), altura(grande)]).
pokemon(hitmonlee, [color(marron), tipo(lucha), altura(grande)]).
pokemon(hitmonchan, [color(marron), tipo(lucha), altura(grande)]).
pokemon(lickitung, [color(rosa), tipo(normal), altura(grande)]).
pokemon(staryu, [color(marron), tipo(agua), altura(pequeno)]).
pokemon(seaking, [color(naranja), tipo(agua), altura(grande)]).
pokemon(goldeen, [color(naranja), tipo(agua), altura(pequeno)]).
pokemon(seadra, [color(azul), tipo(agua), altura(mediano)]).
pokemon(horsea, [color(azul), tipo(agua), altura(pequeno)]).
pokemon(kangaskhan, [color(marron), tipo(normal), altura(grande)]).
pokemon(tangela, [color(azul), tipo(planta), altura(pequeno)]).
pokemon(chansey, [color(rosa), tipo(normal), altura(mediano)]).
pokemon(rhydon, [color(gris), tipo(roca_tierra), altura(grande)]).
pokemon(rhyhorn, [color(gris), tipo(roca_tierra), altura(mediano)]).
pokemon(magikarp, [color(naranja_amarillo_blanco), tipo(agua), altura(pequeno)]).
pokemon(tauros, [color(marron), tipo(normal), altura(mediano)]).
pokemon(pinsir, [color(marron), tipo(bicho), altura(mediano)]).
pokemon(magmar, [color(rojo), tipo(fuego), altura(mediano)]).
pokemon(electabuzz, [color(amarillo), tipo(electrico), altura(mediano)]).
pokemon(jynx, [color(rosa), tipo(hielo_psiquico), altura(mediano)]).
pokemon(scyther, [color(verde), tipo(bicho_volador), altura(mediano)]).
pokemon(mr_mime, [color(rosa), tipo(psiquico_hada), altura(pequeno)]).
pokemon(starmie, [color(morado), tipo(agua_psiquico), altura(mediano)]).
pokemon(ditto, [color(rosa), tipo(normal), altura(pequeno)]).
pokemon(lapras, [color(azul), tipo(agua_hielo), altura(grande)]).
pokemon(gyarados, [color(azul), tipo(agua_volador), altura(grande)]).
pokemon(jolteon, [color(amarillo), tipo(electrico), altura(pequeno)]).
pokemon(vaporeon, [color(azul), tipo(agua), altura(pequeno)]).
pokemon(eevee, [color(marron), tipo(normal), altura(pequeno)]).
pokemon(flareon, [color(rojo), tipo(fuego), altura(pequeno)]).
pokemon(porygon, [color(rosa), tipo(normal), altura(pequeno)]).
pokemon(omanyte, [color(azul), tipo(roca_agua), altura(pequeno)]).
pokemon(omastar, [color(azul), tipo(roca_agua), altura(mediano)]).
pokemon(kabuto, [color(marron), tipo(roca_agua), altura(pequeno)]).
pokemon(kabutops, [color(marron), tipo(roca_agua), altura(mediano)]).
pokemon(aerodactyl, [color(gris), tipo(roca_volador), altura(grande)]).
pokemon(snorlax, [color(verde), tipo(normal), altura(grande)]).
pokemon(articuno, [color(azul), tipo(hielo_volador), altura(grande)]).
pokemon(zapdos, [color(amarillo), tipo(electrico_volador), altura(grande)]).
pokemon(moltres, [color(amarillo), tipo(fuego_volador), altura(grande)]).
pokemon(dratini, [color(azul), tipo(dragon), altura(pequeno)]).
pokemon(dragonair, [color(azul), tipo(dragon), altura(grande)]).
pokemon(dragonite, [color(naranja), tipo(dragon), altura(grande)]).
pokemon(mewtwo, [color(morado), tipo(psiquico), altura(grande)]).
pokemon(mew, [color(rosa), tipo(psiquico), altura(pequeno)]).

% Predicado dinámico para registrar las preguntas hechas y sus respuestas
:- dynamic pregunta_hecha/2.

% Pregunta al usuario y espera una respuesta que coincida con la esperada
preguntar(Atributo, Valor) :-
    pregunta_hecha(Atributo, Valor) -> true; % Si ya se confirmó, continúa.
    pregunta_hecha(Atributo, no(Valor)) -> fail; % Si se contradice, falla.
    format('¿El Pokémon tiene ~w ~w? (si/no)\n', [Atributo, Valor]),
    read(Respuesta),
    (Respuesta == si ->
        assertz(pregunta_hecha(Atributo, Valor));
        assertz(pregunta_hecha(Atributo, no(Valor))), fail).

% Intenta adivinar el Pokémon basado en las preguntas hechas
adivinar_pokemon(Pokemon) :-
    pokemon(Pokemon, Caracteristicas),
    check_caracteristicas(Caracteristicas),
    format('Estoy pensando en ~w.\n', [Pokemon]).

% Verifica si todas las características proporcionadas se cumplen
check_caracteristicas([]).
check_caracteristicas([Caracteristica|Resto]) :-
    Caracteristica =.. [Atributo, Valor],
    preguntar(Atributo, Valor),
    check_caracteristicas(Resto).

% Comienza el juego
jugar :-
    retractall(pregunta_hecha(_,_)), % Limpia las respuestas anteriores
    write('Pensemos en un Pokémon...'), nl,
    ( adivinar_pokemon(_) -> true ; write('No puedo adivinar tu Pokémon.'), nl ),
    retractall(pregunta_hecha(_,_)), % Limpia las respuestas después del juego
    reiniciar_juego.

% Reinicia el juego
reiniciar_juego :-
    write('¿Deseas jugar de nuevo? (si/no)\n'),
    read(Respuesta),
    (Respuesta == si -> jugar ; true). % Si la respuesta es sí, reinicia el juego

% Punto de entrada principal del programa
iniciar :- jugar.
cerrar :- write('¡Hasta luego!\n'), halt.

:- dynamic pregunta_hecha/2. % Limpia las respuestas al inicio
